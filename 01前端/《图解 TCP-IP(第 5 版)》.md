# 第一章 网络基础知识

计算机网络根据规模可以分为：广域网（WAN: Wide Area Network）和局域网（LAN: Local Area Network）

协议的标准化：

-   国际标准化组织（ISO: International Organization for Standards）制定了一个国际标准开放式通信系统互联参考模型（OSI: Open Systems Interconnection），对通信系统进行了标准化
-   TCP/IP 通信协议是由 IETF（Internet Engineering Task Force） 所建议的一种协议

OSI 将通信分为 7 层，上下层之间交互遵循的约定叫 “接口”，同一层之间遵循的约定叫 “协议”。

OSI 仅是一个模型，定义了各层的作用，并没有对接口和协议进行详细的定义。

## OSI 参考模型各层作用

-   7 应用层：针对特定应用的协议，如：电子邮件、远程登录、文件传输等
-   6 表示层：设备固有数据格式和网络标准传输格式的转换，如：统一传输过程的文字、图片、声音的编码等
-   5 会话层：控制连接、数据分割，如：建立断开连接、规定连接保持多久
-   4 传输层：确保数据可靠传输（这层在通信双发节点处理无需再路由器上处理），如：当数据丢失告知源主机重新发送
-   3 网络层：将数据传输到目标地址（目标地址可以是多个网路通过路由器连接而形成的某一个地址），如：进行地址管理与路由选择
-   2 数据链路层：传输介质互连的设备间的数据处理，如：将 0,1 数据划分为有意义的数据帧，传输和识别数据帧
-   1 物理层：0,1 数据与电压和脉冲光的互换

## 传输方式分类

连接类型：有连接、无连接

通信方式：电路交换、分组交换

接收端数量：单播（Unicast）、广播（Broadcast）、多播（Muticast）、任播（Anycast）

## 地址

在网络通信中每层协议使用的地址都不尽相同，如在 TCP/IP 中使用 MAC 地址、IP 地址、端口号等信息作为地址的标识，应用层将电子邮件地址地址等作为网络通信地址。

地址应具有唯一性、层次性

## 网络构成的要素

| 设备                  | 作用                        |
| ------------------- | ------------------------- |
| 网卡 / 网络接口卡（NIC）     | 使计算机联网（Network Interface） |
| 中继器（Repeater）       | 从物理层延长网络                  |
| 网桥（Bridge）/ 2 层交换机  | 从数据链路层延长网络                |
| 路由器（Router）/ 3 层交换机 | 通过网络层转发分组数据               |
| 4 - 7 层交换机          | 处理传输层以上各层网络传输的设备          |
| 网关（Getaway）         | 转换协议的设备                   |

# 第二章 TCP/IP 基础知识

TCP: Transmission Control Protocol

IP: Internet Protocol

很多情况下 TCP/IP 指利用 IP 通信时所用到的协议族的统称

TCP/IP 协议的特点是开放性和实用性

TCP/IP 协议由 IETF 讨论制定，需要标准化的协议被列入 RFC（Request For Comment，官网 [» RFC Editor](https://www.rfc-editor.org/)）文档并在互联网公布

互联网中的每个网络都是由骨干网和末端网组成的，每个网络之间通过 NOC（Network Operation Center） 相连。互联网是众多异构网络通过 IX（Internet Exchange）互联的一个巨型网络。

连接互联网需要向 ISP 或区域网提出申请

## TCP/IP 协议族

-   应用协议：HTTP, SMTP, FTP, TELNET, SNMP
-   传输协议：TCP, UDP
-   网际协议：IP, ICMP, ARP
-   路由控制协议：RIP, OSPF, BGP

## TCP/IP 与 OSI 参考模型

| OSI 参考模型 | TCP/IP 分层模型  |
| -------- | ------------ |
| 应用层      | 应用层          |
| 表示层      | 应用层          |
| 会话层      | 应用层          |
| 传输层      | 传输层          |
| 网络层      | 互联网层         |
| 数据链路层    | 网络通信层（网络接口层） |
| 物理层      | 网络通信层（硬件层）   |

应用层协议：

-   HTTP：客户端与服务器通信
-   SMTP：电子邮件
-   FTP：文件传输，进行文件传输会建立两个 TCP 连接，一个用于控制传输请求，另一个用于实际传输数据
-   SSH 和 TELNET：远程登录
-   SNMP：网络管理，用于管理服务器、路由和交换机

## 例：TCP/IP 通信的过程

以发送电子邮件为例

1.  发送端应用程序处理：输入电子邮件内容，然后点击发送（**应用层**），这时会进行编码（UTP-8 或 GBK 等）处理（**表示层**），然后在合适的时机建立会话和发送数据（**会话层**）
2.  发送端 TCP 模块处理：TCP 根据应用层的指示建立连接、发送数据、发送数据时会在数据前加上 TCP 首部（**传输层**）
3.  发送端 IP 模块处理：IP 将 TCP 传来的数据加上 IP 首部，然后根据路由控制表将数据发给目标路由器或主机（**网络层**）
4.  发送端网络接口（以太网驱动）的处理：接收 IP 包加上以太网首部并通过物理层发送给接收端（**数据链路层**）
5.  接收端网络接口（以太网驱动）的处理：根据首部 MAC 地址判断是否为发送给自己的包，然后根据首部的上一层协议类型（这里是 IP）将数传给处理这种协议（这里是 IP）的程序（**数据链路层**）
6.  接收端 IP 模块处理：根据首部 IP 地址判断是否为发送给自己的包，然后传给上一层（这里是 TCP）的程序（**网络层**）
7.  接收端 TCP 模块处理：数据被完整接收后会传递给端口号识别的应用程序（**传输层**）
8.  接收端应用程序处理：在合适的时机建立会话和接收电子邮件数据（**会话层**），进行编码（**表示层**），然后进行验证和展示（**应用层**）

每个包首部都至少包括：1 发送端接收端地址，2 上一层协议类型

# 第三章 数据链路

# 第四章 IP 协议

# 第五章 IP 协议相关技术

# 第六章 TCP 与 UDP

# 第七章 路由协议

# 第八章 应用协议

# 第九章 网络安全

# 附录
